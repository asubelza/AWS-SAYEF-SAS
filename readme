# SAYEF Web Store (Full Stack)

Proyecto e-commerce para SAYEF (productos el√©ctricos e insumos), con:
- Backend Node.js + Express + MongoDB + JWT + Swagger
- Frontend React (Vite) + PrimeReact
- Roles: usuario / admin
- Admin: CRUD productos + importaci√≥n Excel
- Usuario: login/registro + carrito + √≥rdenes + perfil

---

## üß± Stack
**Backend**
- Node.js + Express
- MongoDB + Mongoose
- Passport JWT
- Swagger docs
- Winston logger

**Frontend**
- React + Vite
- React Router
- PrimeReact
- Context API (Auth + Cart)

---

## ‚úÖ Features
### Usuarios
- Registro / login con email
- Login con Google (OAuth)
- Perfil editable (nombre/apellido)
- Ver mis √≥rdenes
- Cancelar orden (si est√° pending)

### Productos
- Listado
- Filtro por categor√≠a
- Filtro ofertas
- Detalle producto

### Admin
- Panel admin (solo role=admin)
- Crear / editar / borrar productos
- Importar productos desde Excel (`/api/products/import`)

---

## üåê Endpoints principales
### Health
- `GET /health` ‚Üí estado del server + mongo

### Users
- `POST /api/users/register`
- `POST /api/users/login`
- `POST /api/users/google`
- `GET /api/users/current`

### Products
- `GET /api/products`
- `GET /api/products/:pid`
- `POST /api/products` (admin)
- `PUT /api/products/:pid` (admin)
- `DELETE /api/products/:pid` (admin)
- `POST /api/products/import` (admin, excel)

### Orders
- `POST /api/orders`
- `GET /api/orders/me/list` (usuario logueado)
- `PATCH /api/orders/:oid/cancel` (usuario logueado)

---

## ‚öôÔ∏è Variables de entorno

### Backend `.env`
```env
PORT=8080
MONGO_URI=mongodb://mongo:27017/sayefdb
JWT_SECRET=super_secret_key
NODE_ENV=development

# Google OAuth
GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com
Frontend .env
env
Copiar c√≥digo
VITE_API_URL=http://localhost:8080
VITE_GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com
‚ñ∂Ô∏è Correr local
Backend
bash
Copiar c√≥digo
cd BackEnd_SAYEF
npm install
npm run dev
Frontend
bash
Copiar c√≥digo
cd FrontEnd_SAYEF
npm install
npm run dev
üê≥ Docker (si aplica)
bash
Copiar c√≥digo
docker compose up --build
Healthcheck:

GET http://localhost:8080/health

üì¶ Importaci√≥n Excel (admin)
El Excel debe tener columnas:

NOMBRE

Descripcion

C√ìDIGO

PRECIO

Stock

Categoria

Oferta (S/N o TRUE/FALSE)

El import hace upsert por code.

üîê Admin por defecto
Se crea un admin por defecto si no existe:

email: admin@sayef.com

password: admin

(Recomendado cambiarlo en producci√≥n)

üìö Swagger
Docs:

GET /api/docs

üßæ Logs (Winston)
logs/errors.log

logs/combined.log


üê≥ Uso de Docker

Este proyecto est√° dockerizado para facilitar el desarrollo y la ejecuci√≥n del sistema sin necesidad de instalar dependencias locales (Node, MongoDB, etc.).

üì¶ Requisitos previos

Antes de comenzar, asegurate de tener instalado:

Docker

Docker Compose

Verific√° con:

docker --version
docker compose version

üèó Estructura Docker (resumen)

El proyecto utiliza:

Backend: Node.js + Express

Base de datos: MongoDB

Frontend: React + Vite

Nginx (opcional, para servir el front en producci√≥n)

La orquestaci√≥n se realiza mediante docker-compose.

‚ñ∂Ô∏è Levantar el proyecto con Docker

Desde la ra√≠z del proyecto, ejecutar:

docker compose up --build


Esto va a:

Construir las im√°genes

Levantar los contenedores

Exponer los servicios autom√°ticamente

üåê Servicios disponibles
Servicio	URL
Backend API	http://localhost:8080

Frontend	http://localhost:5173

MongoDB	mongodb://localhost:27017
üîÅ Modo desarrollo (hot reload)

Si est√°s trabajando en desarrollo:

Los cambios en el backend se reflejan autom√°ticamente si us√°s nodemon

Los cambios en el frontend se reflejan gracias a Vite

No es necesario reconstruir la imagen salvo que:

Cambies dependencias (package.json)

Cambies el Dockerfile

üßπ Detener los contenedores
docker compose down


Para eliminar tambi√©n vol√∫menes (‚ö† borra datos de MongoDB):

docker compose down -v

üóÑ Persistencia de datos

MongoDB utiliza vol√∫menes Docker, por lo que:

Los datos persisten entre reinicios del contenedor

No se pierden al apagar Docker (salvo que uses -v)

üîê Variables de entorno

Las variables sensibles se configuran mediante archivos .env.

Ejemplo:

PORT=8080
MONGO_URL=mongodb://mongo:27017/sayefdb
JWT_SECRET=supersecretkey
GOOGLE_CLIENT_ID=xxxxxxxx


‚ö†Ô∏è Nunca subir .env al repositorio

ü©∫ Endpoint de salud (health check)

El backend expone un endpoint para verificar el estado del servicio:

GET /health


Respuesta esperada:

{
  "status": "ok",
  "uptime": 12345,
  "timestamp": "2026-01-17T12:00:00Z"
}


Ideal para:

Docker healthchecks

Monitoreo

Debug r√°pido